<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aegis | The Forward Browser</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap');

        body {
            background-color: #050505;
            color: #e5e5e5;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
        }

        /* Animated Aurora Background */
        .aurora-bg {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 50% 50%, rgba(56, 189, 248, 0.1), transparent 50%),
                radial-gradient(circle at 0% 0%, rgba(168, 85, 247, 0.15), transparent 50%),
                radial-gradient(circle at 100% 0%, rgba(236, 72, 153, 0.1), transparent 50%);
            animation: aurora 20s infinite linear;
            z-index: -1;
        }

        @keyframes aurora {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Premium Glassmorphism */
        .glass-panel {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .glass-header {
            background: rgba(10, 10, 10, 0.7);
            backdrop-filter: blur(25px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .neon-glow {
            box-shadow: 0 0 15px rgba(56, 189, 248, 0.3);
        }

        /* Omnibox Animations */
        .omnibox {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .omnibox:focus-within {
            background: rgba(30, 30, 30, 0.9);
            border-color: rgba(56, 189, 248, 0.5);
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.15);
            transform: scale(1.01);
        }

        webview {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.4);
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script> <!-- Icons -->

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Custom Icon Component helper
        const Icon = ({ name, size = 16, className }) => {
            useEffect(() => { lucide.createIcons(); }, [name]);
            return <i data-lucide={name} className={className} style={{ width: size, height: size }}></i>;
        };

        const AegisBrowser = () => {
            const [url, setUrl] = useState('https://www.google.com');
            const [inputUrl, setInputUrl] = useState('https://www.google.com');
            const [secureScore, setSecureScore] = useState(null); // null, 'scanning', 100
            const [sidebarOpen, setSidebarOpen] = useState(true);
            const [logs, setLogs] = useState([]);

            const log = (msg, type = 'info') => {
                setLogs(prev => [...prev, { time: new Date().toLocaleTimeString(), msg, type }].slice(-20));
            };

            const handleNavigate = (e) => {
                e.preventDefault();
                let target = inputUrl;
                if (!target.startsWith('http')) target = 'https://' + target;
                setUrl(target);
                log(`Navigating to ${target}`, 'nav');
                setSecureScore(null); // Reset score on nav
            };

            const handleScan = async () => {
                setSecureScore('scanning');
                log("Initiating Quantum Deep-Scan...", 'warn');

                // Simulate GADOS Backend Delay
                setTimeout(() => {
                    const score = Math.random() > 0.2 ? 100 : 45;
                    setSecureScore(score);
                    if (score === 100) log("GADOS Verification: SAFE (Score: 100)", 'success');
                    else log("WARNING: Anomalies Detected (Score: 45)", 'danger');
                }, 1500);
            };

            return (
                <div className="flex h-screen w-screen relative overflow-hidden bg-black text-white">
                    <div className="aurora-bg"></div>

                    {/* Main Interface */}
                    <div className="flex-1 flex flex-col z-10 transition-all duration-500 ease-in-out">

                        {/* Glass Header */}
                        <header className="glass-header h-14 flex items-center px-4 gap-4 draggable" style={{ WebkitAppRegion: 'drag' }}>
                            {/* Window Controls */}
                            <div className="flex gap-2 opacity-60 hover:opacity-100 transition-opacity">
                                <div className="w-3 h-3 rounded-full bg-[#FF5F57] shadow-sm"></div>
                                <div className="w-3 h-3 rounded-full bg-[#FEBC2E] shadow-sm"></div>
                                <div className="w-3 h-3 rounded-full bg-[#28C840] shadow-sm"></div>
                            </div>

                            <div className="w-px h-6 bg-white/10 mx-2"></div>

                            {/* Nav Controls */}
                            <div className="flex gap-2 text-gray-400">
                                <button className="p-1 hover:text-white hover:bg-white/10 rounded"><Icon name="arrow-left" /></button>
                                <button className="p-1 hover:text-white hover:bg-white/10 rounded"><Icon name="arrow-right" /></button>
                                <button className="p-1 hover:text-white hover:bg-white/10 rounded"><Icon name="rotate-cw" /></button>
                            </div>

                            {/* Smart Omnibox */}
                            <form onSubmit={handleNavigate} className="flex-1 max-w-3xl mx-auto" style={{ WebkitAppRegion: 'no-drag' }}>
                                <div className={`omnibox relative group flex items-center bg-black/40 border border-white/10 rounded-xl px-3 py-1.5 ${secureScore === 100 ? 'border-green-500/50' : secureScore === 45 ? 'border-red-500/50' : ''}`}>
                                    <div className="mr-2 text-gray-400">
                                        {secureScore === 100 ? <Icon name="shield-check" className="text-green-400 neon-glow" /> :
                                            secureScore === 45 ? <Icon name="alert-triangle" className="text-red-500 neon-glow" /> :
                                                inputUrl.startsWith('https') ? <Icon name="lock" size={14} /> : <Icon name="globe" size={14} />}
                                    </div>
                                    <input
                                        type="text"
                                        value={inputUrl}
                                        onChange={(e) => setInputUrl(e.target.value)}
                                        className="bg-transparent border-none outline-none text-sm text-gray-200 w-full placeholder-gray-500 font-medium"
                                        placeholder="Enter URL or query Aegis..."
                                    />
                                    {secureScore === 'scanning' ? (
                                        <div className="animate-spin text-blue-400"><Icon name="loader-2" size={14} /></div>
                                    ) : (
                                        <button type="button" onClick={handleScan} className="text-xs bg-white/5 hover:bg-white/10 text-gray-300 px-2 py-0.5 rounded border border-white/10 transition-colors">
                                            VERIFY
                                        </button>
                                    )}
                                </div>
                            </form>

                            {/* Sidebar Toggle */}
                            <button onClick={() => setSidebarOpen(!sidebarOpen)} className={`p-2 rounded hover:bg-white/10 transition-colors ${sidebarOpen ? 'text-blue-400' : 'text-gray-400'}`} style={{ WebkitAppRegion: 'no-drag' }}>
                                <Icon name="layout-dashboard" size={18} />
                            </button>
                        </header>

                        {/* Webview Content */}
                        <main className="flex-1 relative bg-white/5">
                            <webview src={url} className="w-full h-full"></webview>
                        </main>
                    </div>

                    {/* Intelligence Sidebar (HUD) */}
                    <div className={`glass-panel w-80 flex flex-col border-l border-white/10 transition-all duration-300 ease-[cubic-bezier(0.16,1,0.3,1)] ${sidebarOpen ? 'translate-x-0' : 'translate-x-full absolute right-0 h-full'}`}>
                        <div className="p-4 border-b border-white/5 flex items-center justify-between">
                            <h2 className="text-xs font-bold tracking-widest text-gray-400 uppercase">Aegis Intelligence</h2>
                            <div className="flex gap-2">
                                <div className="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                                <span className="text-[10px] text-green-500 font-mono">ONLINE</span>
                            </div>
                        </div>

                        {/* Agent Modules */}
                        <div className="p-4 space-y-4 flex-1 overflow-y-auto">
                            {/* Security Module */}
                            <div className="bg-black/40 rounded-lg p-3 border border-white/5">
                                <div className="flex items-center gap-2 mb-2">
                                    <Icon name="shield" size={14} className="text-blue-400" />
                                    <span className="text-sm font-medium">Active Defense</span>
                                </div>
                                <div className="flex justify-between items-end">
                                    <div className="text-2xl font-bold font-mono text-white">
                                        {secureScore === 100 ? '100%' : secureScore === 45 ? '45%' : '--'}
                                    </div>
                                    <div className="text-[10px] text-gray-500">TRUST SCORE</div>
                                </div>
                                <div className="w-full h-1 bg-white/10 mt-2 rounded-full overflow-hidden">
                                    <div className={`h-full transition-all duration-1000 ${secureScore === 100 ? 'bg-green-500 w-full' : secureScore === 45 ? 'bg-red-500 w-[45%]' : 'w-0'}`}></div>
                                </div>
                            </div>

                            {/* Live Log */}
                            <div className="font-mono text-[10px] text-gray-400 space-y-1">
                                <div className="uppercase text-gray-600 mb-2 font-bold">System Stream</div>
                                {logs.map((l, i) => (
                                    <div key={i} className={`flex gap-2 ${l.type === 'nav' ? 'text-blue-300' : l.type === 'success' ? 'text-green-400' : l.type === 'danger' ? 'text-red-400' : ''}`}>
                                        <span className="opacity-50">[{l.time}]</span>
                                        <span>{l.msg}</span>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<AegisBrowser />);
    </script>
</body>

</html>